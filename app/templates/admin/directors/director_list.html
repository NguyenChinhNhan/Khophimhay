{% extends 'admin/base.html' %}

{% block title %}üé¨ Danh S√°ch ƒê·∫°o Di·ªÖn{% endblock %}

{% block content %}
<div class="container mt-4">
    <h2 class="mb-4">üé¨ Danh S√°ch ƒê·∫°o Di·ªÖn</h2>

    <!-- T√¨m ki·∫øm -->
    <form method="get" class="mb-3 d-flex">
        <input type="text" name="q" class="form-control me-2" placeholder="üîç T√¨m ƒë·∫°o di·ªÖn..." value="{{ search_query }}">
        <button type="submit" class="btn btn-outline-primary">T√¨m</button>
    </form>

    {% if directors %}
    <table class="table table-bordered table-hover align-middle">
        <thead class="table-dark">
            <tr>
                <th>ID</th>
                <th>·∫¢nh</th>
                <th>T√™n</th>
                <th>H√†nh ƒë·ªông</th>
            </tr>
        </thead>
        <tbody>
            {% for director in directors %}
            <tr>
                <td>{{ director.id }}</td>
                <td>
                    {% if director.image %}
                        <img src="{{ url_for('static', filename='uploads/directors/' ~ director.image) }}"
                             alt="·∫¢nh" class="img-thumbnail" style="max-height: 80px;">
                    {% else %}
                        Kh√¥ng c√≥ ·∫£nh
                    {% endif %}
                </td>
                <td>{{ director.name }}</td>
                <td>
                    <a href="{{ url_for('edit_director', director_id=director.id) }}" class="btn btn-warning btn-sm">‚úèÔ∏è S·ª≠a</a>
                    <a href="{{ url_for('delete_director', director_id=director.id) }}"
                       onclick="return confirm('B·∫°n c√≥ ch·∫Øc mu·ªën xo√°?')" class="btn btn-danger btn-sm">üóë Xo√°</a>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>

    <!-- Ph√¢n trang -->
    <nav aria-label="Pagination">
        <ul class="pagination justify-content-center">
            {% if page > 1 %}
                <li class="page-item">
                    <a class="page-link" href="{{ url_for('admin_directors', page=page-1, q=search_query) }}">‚Üê Tr∆∞·ªõc</a>
                </li>
            {% endif %}
            {% for p in range(1, total_pages + 1) %}
                <li class="page-item {% if p == page %}active{% endif %}">
                    <a class="page-link" href="{{ url_for('admin_directors', page=p, q=search_query) }}">{{ p }}</a>
                </li>
            {% endfor %}
            {% if page < total_pages %}
                <li class="page-item">
                    <a class="page-link" href="{{ url_for('admin_directors', page=page+1, q=search_query) }}">Ti·∫øp ‚Üí</a>
                </li>
            {% endif %}
        </ul>
    </nav>

    {% else %}
        <div class="alert alert-info">Ch∆∞a c√≥ ƒë·∫°o di·ªÖn n√†o.</div>
    {% endif %}
</div>
{% endblock %}
